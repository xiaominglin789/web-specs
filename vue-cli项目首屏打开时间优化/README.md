# 首屏加载太慢、白屏的解决办法





## 




# 前端如何进行优化处理
- 可以分2个方向:
  - 加载时的优化
    + 1.减少资源的http请求
      - 因为完整的http请求需要经历: dns查找 -> tcp握手 -> 浏览器发出http请求 -> 服务器接收到请求->处理请求并发回响应 -> 浏览器接收响应等链路很长的过程。
      - 当请求较多时, 直接体现在消耗性能上。
      - 这就是为什么要把多个小文件合并成一个大文件,从而减少http请求次数的原因.
    + 2.使用服务器端渲染
      - 对比客户端渲染: 需要获取html文件根据需要下载css、js,生成dom再渲染出页面。(下载css、js是需要时间的)
      - 服务器端渲染: 服务器端返回已经填充好内容的html字符串文件,
      客户端只需要解析html文件既可以渲染页面了。
    + 3.静态资源使用CND:
      - 首先: CND -> 是一组分布在多个地理位置的web服务器
      - 用户访问静态资源,去离他最近的web服务器上获取。从而缩短请求时间
    + 4.css写在头部,js写在底部
      - 所有放在`header`标签的`css`和`js`文件都会堵塞页面的渲染
      - 如果这些css、js需要加载和解析很久的话,那么页面就空白了。所以js需要放在底部,等html解析完了再加载js文件
        - css放在头部的原因是: 让html加载时有布局样式。
        - js可以放在头部,但是需要添加标签属性: <script defer>
    + 5.字体图标 代替 图片图标
      - 字体图标是矢量图,不会失真
      - 子图图标体积很小、使用起来很方便,可以直接设置属性如: fontSize、color
    + 6.利用缓存不重复加载相同的资源
      - 合理设置http缓存（expires缓存过期时间），避免用户每次网站都要下载文件,访问过的资源,没有更新的资源,不需要都请求下载，而是读取浏览器缓存(304)
    + 7.图片的优化，有几个方面
      + 图片的懒加载(延迟加载): 
        - 就是在页面中先不给图片设置src路径,当图片出现在浏览器的可视区域时才去加载真正的图片
      + 降级图片的质量
        - 将部分不重要的图片切成jpg格式,压缩60%
        - 如果可以用css画出图片效果,那就用css来画出图片的效果
          - 因为代码的大小是图片的 1/(2-50)
    + 8.通过webpack按需加载代码块
    + 9.提取第三方库代码
        - 减少 es6 转 es5的冗余代码

  + 运行时的优化
    + 减少重排、重绘
      - 重排: 当DOM的变化引发了元素几何属性的变化，比如改变元素的宽高，元素的位置，导致浏览器不得不重新计算元素的几何属性，并重新构建渲染树，这个过程称为“重排”。
        - 触发重排情景有:
          + 页面第一次渲染 
          + 浏览器窗口尺寸改变
          + 元素位置和尺寸发生改变的时候
          + 新增和删除可见元素
          + 内容发生改变（文字数量或图片大小等等）
          + 元素字体大小变化
      - 重绘: 绘制是填充像素的过程。它涉及绘出文本、颜色、图像、边框和阴影，基本上包括元素的每个可视部分。绘制一般是在多个表面（通常称为层）上完成的。
      - 尽可能减少重排的操作
      - 具体的操作: js操作样式时,不要直接修改样式值,而是通过替换class类来改变样式
    + switch 合理替代 if-else
      - switch的缺点:只适用与case值为常量的分支结构

  + 使用 flex 弹性布局（需要考虑浏览器的兼容性）
  + 用 transform 和 opacity属性更改来实现动画
    - 因为这两个属性的变化不会触发重排重绘的






























